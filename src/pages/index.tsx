/* eslint-disable @next/next/no-img-element */
import { useState } from 'react'
import Head from 'next/head'
import { getOptionsForVote } from '../utils/getRandomPokemon'
import { trpc } from '../utils/trpc'

export default function Home() {
  const [ids, setIds] = useState(() => getOptionsForVote())
  const [first, second] = ids
  const firstPokemon = trpc.get_pokemon_by_id.useQuery({ pokemonId: first })
  const secondPokemon = trpc.get_pokemon_by_id.useQuery({ pokemonId: second })
  console.log({ firstPokemon })

  if (!firstPokemon.data || !secondPokemon.data) {
    return <div>Loading...</div>
  }

  const voteForRoundest = (selection: number) => {
    setIds(getOptionsForVote())
  }

  return (
    <div className='h-screen w-screen flex flex-col justify-center items-center'>
      <Head>
        <title>Roundest Pokemon</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <div className='text-center text-3xl mt-[-2rem]'>
        Which Pokemon is Rounder?
      </div>
      <div className='p-6'></div>
      <div className='bg-gray-700 drop-shadow-2xl rounded-3xl p-8 flex justify-between items-center'>
        <div className='flex flex-col items-center'>
          <div className='text-center text-3xl mb-4 capitalize'>
            {firstPokemon?.data?.name!}
          </div>
          <div className='w-64 h-64 bg-gradient-to-r from-indigo-700 to-indigo-800 rounded-full'>
            <img
              src={
                firstPokemon.data?.sprites.other?.['official-artwork']
                  .front_default!
              }
              alt='pokemon1'
            />
          </div>
          {/* <div className='pb-8'></div> */}
          <button
            className='bg-gradient-to-r from-green-500 to-blue-700 hover:from-green-700 hover:to-blue-800 mt-8 font-bold py-2 w-1/2 rounded-full'
            onClick={() => voteForRoundest(first)}
          >
            Vote!
          </button>
        </div>
        <div className='p-12 text-3xl font-semibold'>VS</div>
        <div className='flex flex-col items-center'>
          <div className='text-center text-3xl mb-4 capitalize'>
            {secondPokemon?.data?.name!}
          </div>
          <div className='w-64 h-64 bg-gradient-to-r from-rose-700 to-rose-800 rounded-full'>
            <img
              src={
                secondPokemon.data?.sprites.other?.['official-artwork']
                  .front_default!
              }
              alt='pokemon2'
            />
          </div>
          <button
            className='bg-gradient-to-r from-yellow-400 to-orange-600 hover:from-yellow-600 hover:to-orange-800 mt-8 font-bold py-2 w-1/2 rounded-full'
            onClick={() => voteForRoundest(second)}
          >
            Vote!
          </button>
        </div>
      </div>
    </div>
  )
}
